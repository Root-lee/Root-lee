<!DOCTYPE html>
<html lang="zh-ch">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Root lee">
    <title>用py2exe打包python程序成windows程序（打包成单一文件） - Root lee</title>
    <meta name="author" content="Root lee">
    <meta name="description" content="Root lee">
    
        <link rel="icon" href="/assets/images/favicon.ico">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="简介py2exe就是将python代码打包成windows可执行程序的一个python开源项目。官方网站：http:&#x2F;&#x2F;www.py2exe.org&#x2F;下载地址：http:&#x2F;&#x2F;sourceforge.net&#x2F;projects&#x2F;py2exe&#x2F;files&#x2F; 经典代码代码1：setup.py执行方式：1python setup.py代码内容：123456from distutils.core import">
<meta property="og:type" content="blog">
<meta property="og:title" content="用py2exe打包python程序成windows程序（打包成单一文件）">
<meta property="og:url" content="http://irootlee.com/Py2exe/index.html">
<meta property="og:site_name" content="Root lee">
<meta property="og:description" content="简介py2exe就是将python代码打包成windows可执行程序的一个python开源项目。官方网站：http:&#x2F;&#x2F;www.py2exe.org&#x2F;下载地址：http:&#x2F;&#x2F;sourceforge.net&#x2F;projects&#x2F;py2exe&#x2F;files&#x2F; 经典代码代码1：setup.py执行方式：1python setup.py代码内容：123456from distutils.core import">
<meta property="og:locale" content="zh_CH">
<meta property="article:published_time" content="2015-10-03T12:00:00.000Z">
<meta property="article:modified_time" content="2024-03-30T13:08:39.798Z">
<meta property="article:author" content="Root lee">
<meta property="article:tag" content="py2exe">
<meta property="article:tag" content="windows">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@54rootlee">
    
        <meta rel="publisher" content="https://plus.google.com/54rootlee"/>
    
    
    
        <meta property="og:image" content="/assets/images/root.png"/>
    
    
        <meta property="og:image" content="/Py2exe/Python.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://irootlee.com/Py2exe/Python.png" />
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style.min.css">

    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-69285109-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/%20">Root lee</a>
    </h1>
    
        
            <a  class="header-right-icon st-search-show-outputs"
                href="#search">
        
                <i class="fa fa-lg fa-search"></i>
            </a>
    
</header>
            <nav id="sidebar" data-behavior="1">
    
    <div class="sidebar-profile">
        <a href="/#about">
            
            <img class="sidebar-profile-picture" src="/assets/images/root.png"/>
            
        </a>
        <span class="sidebar-profile-name">Root lee</span>
    </div>
    
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-categories
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-tags
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-archives
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link st-search-show-outputs"
                    href="#search
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="#about
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About me</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="https://github.com/Root-lee" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="mailto:irootlee@gmail.com" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/atom.xml
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>
            <div id="main" data-behavior="1">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
        <div class="post-header main-content-wrap">
    
        <h1 class="post-title" itemprop="headline">用py2exe打包python程序成windows程序（打包成单一文件）</h1>
    
    <div class="post-meta">
    <time  itemprop="datePublished" content="Sat Oct 03 2015 20:00:00 GMT+0800">
        Oct 03, 2015
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Python/">Python</a>


    
</div>
</div>
    
    <div class="post-content markdown main-content-wrap" itemprop="articleBody">
        
            <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>py2exe就是将python代码打包成windows可执行程序的一个python开源项目。<br>官方网站：<a href="http://www.py2exe.org/">http://www.py2exe.org/</a><br>下载地址：<a href="http://sourceforge.net/projects/py2exe/files/">http://sourceforge.net/projects/py2exe/files/</a></p>
<h2 id="经典代码"><a href="#经典代码" class="headerlink" title="经典代码"></a>经典代码</h2><h3 id="代码1：setup-py"><a href="#代码1：setup-py" class="headerlink" title="代码1：setup.py"></a>代码1：setup.py</h3><p>执行方式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py</span><br></pre></td></tr></table></figure><br>代码内容：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"><span class="keyword">import</span> py2exe</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">sys.argv.append(<span class="string">&#x27;py2exe&#x27;</span>)</span><br><span class="line">setup(console=[<span class="string">&quot;yourcode.py&quot;</span>])</span><br></pre></td></tr></table></figure></p>
<h3 id="代码2：setup-py"><a href="#代码2：setup-py" class="headerlink" title="代码2：setup.py"></a>代码2：setup.py</h3><p>执行方式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py</span><br></pre></td></tr></table></figure><br>代码内容：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"><span class="keyword">import</span> py2exe</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="comment">#this allows to run it with a simple double click.</span></span><br><span class="line">sys.argv.append(<span class="string">&#x27;py2exe&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">py2exe_options = &#123;</span><br><span class="line">        <span class="string">&quot;includes&quot;</span>: [<span class="string">&quot;sip&quot;</span>],</span><br><span class="line">        <span class="string">&quot;dll_excludes&quot;</span>: [<span class="string">&quot;MSVCP90.dll&quot;</span>,],</span><br><span class="line">        <span class="string">&quot;compressed&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;optimize&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;ascii&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;bundle_files&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">setup(</span><br><span class="line">      name = <span class="string">&#x27;PyQt Demo&#x27;</span>,</span><br><span class="line">      version = <span class="string">&#x27;1.0&#x27;</span>,</span><br><span class="line">      windows = [&#123; <span class="string">&quot;script&quot;</span>:<span class="string">&#x27;wordreplace.py&#x27;</span>,<span class="string">&quot;icon_resources&quot;</span>:[(<span class="number">1</span>,<span class="string">&quot;myico.ico&quot;</span>)]&#125;], </span><br><span class="line">      zipfile = <span class="literal">None</span>,</span><br><span class="line">      options = &#123;<span class="string">&#x27;py2exe&#x27;</span>: py2exe_options&#125;</span><br><span class="line">      )</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="代码注释"><a href="#代码注释" class="headerlink" title="代码注释"></a>代码注释</h2><ol>
<li><p>sys.argv.append(‘py2exe’)一行，是允许程序通过双击的形式执行。</p>
</li>
<li><p>选项中“includes”是需要包含的文件，这里的”sip”是PyQt程序打包时需要添加的，如果不是PyQt程序不需要此项。</p>
</li>
<li><p>“dll_excludes”是需要排除的dll文件，这里的”MSVCP90.dll”文件，如果不排除的话会报error: MSVCP90.dll: No such file or directory错误。</p>
</li>
<li><p>“compressed”为1，则压缩文件</p>
</li>
<li><p>“optimize”为优化级别，默认为0。</p>
</li>
<li><p>“ascii”指不自动包含encodings和codecs。</p>
</li>
<li><p>“myico.ico”是程序图标</p>
</li>
<li><p>bundle_files”是指将程序打包成单文件（此时除了exe文件外，还会生成一个zip文件。如果不需要zip文件，还需要设置zipfile = None）。<br>1表示pyd和dll文件会被打包到单文件中，且不能从文件系统中加载python模块；值为<br>2表示pyd和dll文件会被打包到单文件中，但是可以从文件系统中加载python模块。<br>64位的Py2exe不要添加本句。</p>
</li>
<li><p>windows = [‘pyqtdemo.py’,]，这里使用的是windows，即没有命令行窗口出现，如果使用console则表示有命令行窗口出现。</p>
</li>
<li><p>执行该文件，会得到一个build文件夹和一个dist文件夹。其中，dist文件夹，就是你得到的打包程序。</p>
</li>
<li><p>如果按照上述代码执行成功，则应该dist文件夹中，只包括程序的exe文件和w9xpopen.exe。w9xpopen.exe是针对windows9x版本的，一般来说该文件并不需要。<br>如果bundle_files不为1、2，则dist文件夹中还会包括一些dll文件和pyd文件（Python Dll文件）。如果bundle_files为2，dist文件夹会包括一个python##.dll文件，如果为1则不会。<br>如果没有使用zipfile=None，还会生成一个library.zip文件。</p>
</li>
</ol>
<h2 id="常见的问题"><a href="#常见的问题" class="headerlink" title="常见的问题"></a>常见的问题</h2><ol>
<li><p>打包后的exe不可执行，是由于缺少两个必要的文件，msvcr90.dll和Microsoft.VC90.CRT.manifest，其中msvcr90.dll的版本为9.0.21022.8，详细解释见官网，<br>解决方法：将上述两个文件copy进dist文件夹，或者见官网的解决方式（在打包前，将这两个文件作为资源，直接复制到dist文件夹下）。</p>
</li>
<li><p>打包后的exe报错，说缺少文件，这个问题的主要原因是python代码import文件时，使用了某些模块提供的所谓lazy import，使得打包时，py2exe找不到类库真正的路径<br>解决方法：重新import类库文件的真实路径，然后重新打包，问题解决。</p>
</li>
<li><p>需要打包一些系统dll，有时候，我们想要将一些dll打包进exe里面，就需要修改py2exe的默认配置，详见官网。</p>
</li>
</ol>
<blockquote>
<p>参考链接：<a href="http://www.pythoner.com/111.html">http://www.pythoner.com/111.html</a></p>
</blockquote>

        
        
            
        
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/py2exe/" rel="tag">py2exe</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/windows/" rel="tag">windows</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/linux/"  data-tooltip="【转载】Linux操作系统基础">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://irootlee.com/Py2exe/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://irootlee.com/Py2exe/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://irootlee.com/Py2exe/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 Root lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/linux/"  data-tooltip="【转载】Linux操作系统基础">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://irootlee.com/Py2exe/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://irootlee.com/Py2exe/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://irootlee.com/Py2exe/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="1">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://irootlee.com/Py2exe/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://irootlee.com/Py2exe/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://irootlee.com/Py2exe/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/root.png"/>
        
            <h4 id="about-card-name">Root lee</h4>
        
            <h5 id="about-card-bio"><p>沉默是金</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Programmer</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                HangZhou
            </h5>
        
    </div>
</div>
        <div id="cover" style="background-image:url('/assets/images/cover_green.jpg');"></div>
    </body>
    <!--SCRIPTS-->

<script src="/assets/js/script.min.js"></script>

<!--SCRIPTS END-->



</html>
